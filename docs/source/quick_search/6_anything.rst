杂记
====

topic
-----

linux环境变量控制文件
`````````````````````

- profile是交互式，登录进入时生效

    - ``/etc/profile``: 系统环境参数，所有用户有效
    - ``~/.bash_profile```: 针对用户的环境参数

- bashrc是交互式，非登录进入时也会生效，如 ``docker exec``

  - ``/etc/bashrc```: 系统bash环境设置，所有用户有效
  - ``~/.bashrc```: 针对用户的bash环境设置

sso的跨域问题
`````````````

sso的一般流程为：

1. 应用前端访问应用后端，发现没有登录信息，跳转到单点登录前端
2. 成功输入账号密码后单点登录携带code信息跳转到重定向页面
3. 重定向页面解析code，并将code传给应用后端，应用使用code获取用户信息
4. 应用前端获取应用后端返回的用户信息，成功登录

一般sso与应用不同源，单点登录页面与应用前端页面存在跨域问题，不能使用后端接口返回单点登录地址302方式重定向，
只能让后端返回登录地址，前端通过修改 ``window.location.href`` 等方式重定向跳转到单点登录，
并设置 **回调地址为前端登录页面**，让单点登录成功后跳转到前端登录页面，
前端登录页面解析code并用code请求后端接口，后端接口使用code与sso通信获取信息

安装python注意事项
``````````````````

1. 源码安装时安装路径不能带有冒号

后端服务与后台任务
``````````````````

后端服务与后台服务分进程运行，方便分别更新以及防止相互干扰影响
